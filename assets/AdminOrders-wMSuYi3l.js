import{p as x}from"./paginationComponent-q2MQv_9Z.js";import{u as m}from"./allAdminOrderStore-ajlHHanV.js";import{_ as f,W as y,r as w,o as s,c as n,b as t,F as k,I as O,d as v,f as _,t as r}from"./index-Mm90-rHe.js";import"./sweetalert2.all-S9g-JOyd.js";var C={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"winnie05",BASE_URL:"/Vue2023_week6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const c=m(),{VITE_API:h,VITE_PATH:u}=C,L={data(){return{ordersList:[],pagination:{}}},methods:{async getOrderList(o=1){await c.getAllOrders(o),this.ordersList=c.allOrders,this.pagination=c.pagination},showOrder(o){this.$router.push(`/admin/orderinfo/${o}`)},deleteOrder(o){let a=`${h}/api/${u}/admin/orders/all`,d='確定要刪除<span class="text-danger">全部</span>訂單嗎？';o!=="all"&&(a=`${h}/api/${u}/admin/order/${o}`,d=`確定要刪除訂單 <p><span class="text-danger">${o}</span> 嗎？</p>`),this.$swal.fire({title:d,text:"請再次確認，以免影響顧客權益",icon:"question",showCancelButton:!0,confirmButtonColor:"#787878",cancelButtonColor:"#333333",cancelButtonText:"取消",confirmButtonText:"確認刪除"}).then(p=>{if(p.isConfirmed){const i=this.$loading.show();this.axios.delete(a).then(l=>{this.$swal.fire({title:l.data.message,confirmButtonColor:"#333333",confirmButtonText:"確認"}),this.getOrderList()}).catch(l=>{this.$swal.fire({icon:"error",text:l.response.data.message})}).finally(()=>{i.hide()})}})}},computed:{...y(m)},components:{paginationComponent:x},mounted(){console.log("Orders 的 mounted，即將執行確認登入"),this.getOrderList()}},$={class:"overflow-y-scroll scrollbar-y-hide vh-100"},T={class:"d-flex justify-content-between py-4 py-md-5"},B=t("h2",{class:"fw-bold"},"訂單管理",-1),A={key:0,class:"py-5 text-center"},S={key:1,class:"table align-middle table-sm"},V=t("thead",null,[t("tr",null,[t("th",null,"訂單編號"),t("th",{class:"d-none d-md-table-cell text-center"},"訂單時間"),t("th",{class:"d-none d-lg-table-cell text-center"},"客戶姓名"),t("th",{class:"text-nowrap"},[_("付款"),t("span",{class:"d-block d-sm-inline"},"狀態")]),t("th",{class:"text-nowrap"},[_("處理"),t("span",{class:"d-block d-sm-inline"},"狀態")]),t("th",{class:"d-none d-lg-table-cell text-center"},"總金額"),t("th")])],-1),E={class:"d-none d-md-table-cell text-center"},I={class:"d-none d-lg-table-cell text-center"},D={key:0,class:"text-danger text-nowrap"},P={key:1,class:"text-nowrap"},N={key:0,class:"text-nowrap"},R={key:1,class:"text-danger text-nowrap"},F={class:"d-none d-lg-table-cell text-end"},G={class:"btn-group align-items-center"},H=["onClick"],j=t("i",{class:"bi bi-eye text-default"},null,-1),q=[j],M=["onClick"],U=t("i",{class:"bi bi-trash text-danger"},null,-1),W=[U];function z(o,a,d,p,i,l){const g=w("paginationComponent");return s(),n("div",$,[t("div",T,[B,t("button",{type:"button",class:"btn btn-dark",onClick:a[0]||(a[0]=e=>l.deleteOrder("all"))},"清除全部訂單")]),t("div",null,[i.ordersList.length?(s(),n("table",S,[V,t("tbody",null,[(s(!0),n(k,null,O(i.ordersList,e=>(s(),n("tr",{key:e.id},[t("td",null,r(e.id),1),t("td",E,r(new Date(e.create_at*1e3).toLocaleString().split(" ")[0]),1),t("td",I,r(e.user.name),1),t("td",null,[e.is_paid?(s(),n("span",D,"已付款")):(s(),n("span",P,"未付款"))]),t("td",null,[e.is_shipping?(s(),n("span",N,"已出貨")):(s(),n("span",R,"未出貨"))]),t("td",F,"NT$ "+r(e.total.toLocaleString()),1),t("td",null,[t("div",G,[t("button",{type:"button",class:"btn border-0",onClick:b=>l.showOrder(e.id)},q,8,H),t("button",{type:"button",class:"btn border-0",onClick:b=>l.deleteOrder(e.id)},W,8,M)])])]))),128))])])):(s(),n("p",A,"目前沒有訂單")),v(g,{pagination:i.pagination,onGetList:l.getOrderList},null,8,["pagination","onGetList"])])])}const Y=f(L,[["render",z]]);export{Y as default};
