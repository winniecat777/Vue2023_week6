import{p as y}from"./paginationComponent-q2MQv_9Z.js";import{_ as $,r as h,o as c,c as d,b as t,d as u,w as p,F as k,I as v,f,O as P,t as r,R as g}from"./index-Mm90-rHe.js";var C={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"winnie05",BASE_URL:"/Vue2023_week6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:m,VITE_PATH:b}=C,L={data(){return{productsList:[],pagination:{}}},methods:{getProductList(s=1,i){let l=`${m}/api/${b}/admin/products?page=${s}`;i&&(l+=`&category=${i}`),this.axios.get(l).then(o=>{const{products:n,pagination:a}=o.data;this.productsList=n,this.pagination=a}).catch(o=>{this.$swal.fire({icon:"error",text:o.response.data.message})})},showProductPage(s){this.$router.push(`/admin/productinfo/${s}`)},deleteProduct(s){const i=`${m}/api/${b}/admin/product/${s}`;this.$swal.fire({title:"確定要刪除產品嗎？",text:"這個動作無法復原",icon:"question",showCancelButton:!0,confirmButtonColor:"#787878",cancelButtonColor:"#333333",cancelButtonText:"取消",confirmButtonText:"確認刪除"}).then(l=>{if(l.isConfirmed){const o=this.$loading.show();this.axios.delete(i).then(n=>{this.$swal.fire({title:n.data.message,confirmButtonColor:"#333333",confirmButtonText:"確認"}),this.getProductList()}).catch(n=>{this.$swal.fire({icon:"error",text:n.response.data.message})}).finally(()=>{o.hide()})}})}},mounted(){this.getProductList()},components:{paginationComponent:y}},B={class:"overflow-y-scroll scrollbar-y-hide vh-100"},T={class:"d-flex justify-content-between py-4 py-md-5"},V=t("h2",{class:"fw-bold"},"產品管理",-1),E={class:"table align-middle"},I=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,[f("商品"),t("span",{class:"d-block d-sm-inline"},"名稱")]),t("th",{class:"d-none d-md-table-cell text-center"},"分類"),t("th",{class:"d-none d-lg-table-cell text-center"},"原價 / 售價"),t("th",null,"狀態"),t("th")])],-1),A={class:"d-none d-md-table-cell"},S={class:"py-1 rounded-pill bg-light text-center text-nowrap"},D={class:"d-none d-lg-table-cell"},R={class:"h5 text-center"},N={key:0,class:"text-danger text-nowrap"},O={key:1,class:"text-nowrap"},z={class:"btn-group align-items-center"},F=["onClick"],G=t("i",{class:"bi bi-pencil text-default"},null,-1),H=[G],U=["onClick"],j=t("i",{class:"bi bi-trash text-danger"},null,-1),q=[j];function M(s,i,l,o,n,a){const _=h("router-link"),x=h("paginationComponent");return c(),d("div",B,[t("div",T,[V,u(_,{to:"/admin/productinfo/new",class:"btn btn-dark"},{default:p(()=>[f("建立新的產品")]),_:1})]),t("div",null,[t("table",E,[I,t("tbody",null,[(c(!0),d(k,null,v(n.productsList,e=>(c(),d("tr",{key:e.id},[t("td",null,[t("div",{class:"bg-img-center bg-img-contain bg-img-norepeat ratio-1x1",style:P([{width:"100px"},{backgroundImage:`url(${e.imageUrl})`}])},null,4)]),t("td",null,r(e.title),1),t("td",A,[t("div",S,r(e.category),1)]),t("td",D,[t("div",R,r(e.origin_price)+" / "+r(e.price),1)]),t("td",null,[e.is_enabled?(c(),d("p",N,"已上架")):(c(),d("p",O,"未上架"))]),t("td",null,[t("div",z,[t("button",{type:"button",class:"btn border-0",onClick:w=>a.showProductPage(e.id)},H,8,F),t("button",{type:"button",class:"btn border-0",onClick:w=>a.deleteProduct(e.id)},q,8,U),u(_,{class:g(["d-none d-sm-table-cell btn border-0",{"pe-none":!e.is_enabled}]),target:"_blank",to:`/productinfo/${e.id}`},{default:p(()=>[t("i",{class:g(["bi bi-house",e.is_enabled?"text-default":"text-light"])},null,2)]),_:2},1032,["to","class"])])])]))),128))])]),u(x,{pagination:n.pagination,onGetList:a.getProductList},null,8,["pagination","onGetList"])])])}const Q=$(L,[["render",M]]);export{Q as default};
